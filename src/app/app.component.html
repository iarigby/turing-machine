<div id="turing-machine">
  <div id="setup">
    <h3>Terminals</h3>
    <div *ngFor="let terminal of terminals">
      <span>{{terminal}}, </span>
      <button (click)="removeTerminal(terminal)">remove</button>
    </div>
    <input #terminalInput (keyup.enter)="addTerminal(terminalInput.value); terminalInput.value=''"/>
    <ul></ul>
    <h3>States:</h3>
    <ul *ngFor="let state of turingMachine.states">
      <div>
        <div class="hasInlineButton" [ngClass]="{'acceptState': state.isAcceptState}">
          <h3>{{state.name}} </h3>
        </div>
        <button (click)="state.toggleAccept()">toggle accept</button>
      </div>
      <div>
        <h4>Rules:</h4>
        <ul *ngFor="let rule of state.rules">
          <div class="ruleList">
            <div class="hasInlineButton" [ngClass]="{'usedrule': rule===turingMachine.rule}">{{rule.read}} | {{rule.replace}}, {{rule.move}}
              <span *ngIf="rule.nextState.name != state.name"> -> {{rule.nextState.name}}</span>
            </div>
            <button (click)="state.removeRule(rule)">remove</button>
          </div>
        </ul>
      </div>
      <div> add rule: </div>
      <input #ruleInput (keyup.enter)="turingMachine.addRule(state, ruleInput.value); ruleInput.value=''"/>
    </ul>
    <div> add state: </div>
    <input #box (keyup.enter)="turingMachine.addState(box.value); box.value=''"/>
  </div>
  <div id="evaluation">
    <div>inputstring:</div>
    <input #inputString (keyup.enter)="turingMachine.inputTape.evaluationString = inputString.value; turingMachine.restart(); turingMachine.run()"/>
    <div>
      <div> state: {{turingMachine.currentState.name}} index: {{turingMachine.inputTape.currentIndex}}</div>
      <div style="font-size: 2em;">
        <span *ngFor="let char of turingMachine.inputTape.evaluationString.split('')">
         {{char}}
      </span>
      </div>
    </div>
    <div>{{turingMachine.finalMessage}}</div>
    <div style="margin-top: 100px; padding: 5px;">
      <p>speed: {{turingMachine.timeoutTime / 1000}} seconds for 1 move </p>
      <button (click)="turingMachine.increaseTime()">slower</button>
      <button (click)="turingMachine.decreaseTime()">faster</button>
    </div>
    <div style="margin-top: 300px">add rules with this format (but without commas or spaces). If next state is omitted, it will be considered as loop</div>
    <div>  character on tape, character to be replaced, which way to move (L or R)</div>
    <div>example: abR -> read a, replace with b, move Right</div>
  </div>
</div>
